baidu.ui=baidu.ui||{};baidu.suggestion=baidu.ui.suggestion=baidu.ui.suggestion||{};baidu.ui.suggestion._Data=function(_,B){var A={};_.listen("response_data",function(C,B){A[C]=B;_.call("data_ready",C,B);});_.listen("need_data",function(C){typeof A[C]=="undefined"?B(C):_.call("data_ready",C,A[C]);});return{};};(function(){var _={},A=function(_){var A={};_.listen=function(B,D){A[B]=A[B]||[];for(var C=0;C<A[B].length&&A[B][C]!=D;){C++;}C==A[B].length&&A[B].push(D);return _;};_.call=function(B){if(A[B]){for(var C=0;C<A[B].length;C++){A[B][C].apply(this,Array.prototype.slice.call(arguments,1));}}return _;};};_.extend=function(_){new A(_);return _;};_.extend(_);baidu.suggestion._Central=_;})();baidu.ui.suggestion._Div=function(D,L,E,K,A){function I(I,C){if(F.style.display=="none"){D.call("need_data",E.getValue());}else{var K=_()[0];B();if(I){if(K==0){G(C);return;}if(K==-1){K=S.length;}K--;}else{if(K==S.length-1){G(C);return;}K++;}J(K);H();I=E.getValue();G(K);K=_();A.onpick(I,K[0],K[1],K[2]);}}function B(){for(var _=0;_<Q.length;_++){Q[_].className=M+"ml";}}function _(){if(Q&&F.style.display!="none"){for(var _=0;_<Q.length;_++){if(Q[_].className==M+"mo"){return[_,S[_],P[_]];}}}return[-1,""];}function H(){var B=_();A.onhighlight(E.getValue(),B[0],B[1],B[2]);}function J(_){B();Q[_].className=M+"mo";}function G(_){D.call("pick_word",S&&typeof _=="number"&&typeof S[_]!="undefined"?S[_]:_);}function C(){if(F.style.display=="none"){return null;}N.style.display=F.style.display="none";A.onhide();}function R(_){return function(){D.call("confirm_item",E.getValue(),S[_],_,P[_]);var B=E.getValue();G(S[_]);A.onpick(B,_,S[_],P[_]);A.onconfirm(E.getValue(),_,S[_],P[_]);C();};}var O=this,S,P,T,M=A.class_prefix,Q,F=document.createElement("DIV");F.id=M+(new Date).getTime();F.className=M+"wpr";F.style.display="none";var N=document.createElement("IFRAME");N.src="javascript:void(0)";N.className=M+"sd";N.style.display="none";N.style.position="absolute";N.style.borderWidth="0px";A.apd_body?document.body.appendChild(F):L.parentNode.appendChild(F);F.parentNode.insertBefore(N,F);D.listen("start",function(){baidu.on(document,"mousedown",function(_){_=_||window.event;_=_.target||_.srcElement;if(_!=L){for(;_=_.parentNode;){if(_==F){return;}}C();}});baidu.on(window,"blur",C);});D.listen("key_enter",function(){var D=_(),B=D[0]==-1?T:D[1];A.onconfirm(E.getValue(),D[0],B,D[2]);C();});D.listen("key_up",function(_){I(1,_);});D.listen("key_down",function(_){I(0,_);});D.listen("key_tab",C);D.listen("key_esc",C);D.listen("all_clear",C);D.listen("data_ready",function(A,_){T=_;S=[];P=[];A=0;for(var E=_.length;A<E;A++){if(typeof _[A].input!="undefined"){S[A]=_[A].input;P[A]=_[A].selection;}else{P[A]=S[A]=_[A];}}if(S.length!=0){Q=K(F,P,O);A=0;for(E=Q.length;A<E;A++){baidu.on(Q[A],"mouseover",function(){B();this.className=M+"mo";H();});baidu.on(Q[A],"mouseout",B);baidu.on(Q[A],"mousedown",function(_){D.call("mousedown_item");if(!baidu.ie){_.stopPropagation();_.preventDefault();return false;}});baidu.on(Q[A],"click",R(A));}}else{C();}});return{element:F,shade:N,pick:G,highlight:J,hide:C,dispose:function(){F.parentNode.removeChild(F);}};};baidu.ui.suggestion._InputWatcher=function(C,J){var D,I=0,A="",G="",B="",_,F=false,H=false,E=false;J.setAttribute("autocomplete","off");baidu.on(J,"keydown",function(_){if(!E){C.call("start");E=true;}_=_||window.event;var A;switch(_.keyCode){case 9:A="tab";break;case 27:A="esc";break;case 13:A="enter";baidu.event.preventDefault(_);break;case 38:A="up";baidu.event.preventDefault(_);break;case 40:A="down";break;}A&&C.call("key_"+A,G);});baidu.on(J,"mousedown",function(){if(!E){C.call("start");E=true;}J.value&&C.call("need_data",J.value);});baidu.on(J,"beforedeactivate",function(){if(F){window.event.cancelBubble=true;window.event.returnValue=false;}});C.listen("start",function(){B=J.value;I=setInterval(function(){if(!H){baidu.G(J)==null&&suggestion.dispose();var E=J.value;if(E==A&&E!=""&&E!=B&&E!=_){if(D==0){D=setTimeout(function(){C.call("need_data",E);},100);}}else{clearTimeout(D);D=0;if(E==""&&A!=""){_="";C.call("all_clear");}A=E;if(E!=_){G=E;}if(B!=J.value){B="";}}}},10);});C.listen("pick_word",function(A){F&&J.blur();J.value=_=A;F&&J.focus();});C.listen("mousedown_item",function(){H=F=true;setTimeout(function(){F=H=false;},500);});C.listen("confirm_item",function(B,C,_){H=false;G=A=_;});return{getValue:function(){return J.value;},dispose:function(){clearInterval(I);}};};baidu.ui.suggestion._Suggestion=function(A,E){var B=this;B.options={onpick:function(){},onconfirm:function(){},onhighlight:function(){},onhide:function(){},view:null,getData:false,prepend_html:"",append_html:"",class_prefix:"tangram_sug_",apd_body:false};baidu.extend(B.options,E);if(!(A=baidu.G(A))){return null;}B.inputElement=A;if(A.id){B.options._inputId=A.id;}else{A.id=B.options._inputId=B.options.class_prefix+"ipt"+(new Date).getTime();}B._adjustPos=function(E){var _=C.element,K=C.shade,L=document;L=L.compatMode=="BackCompat"?L.body:L.documentElement;var J=L.clientHeight,G=L.clientWidth;if(!(_.style.display=="none"&&E)){E=baidu.dom.getPosition(A);E=[E.top+A.offsetHeight-1,E.left,A.offsetWidth];E=typeof B.options.view=="function"?B.options.view(E):E;_.style.display=K.style.display="block";K.style.top=E[0]+"px";K.style.left=E[1]+"px";K.style.width=E[2]+"px";var H=parseFloat(baidu.getStyle(_,"marginTop"))||0,D=parseFloat(baidu.getStyle(_,"marginLeft"))||0;_.style.top=E[0]-H+"px";_.style.left=E[1]-D+"px";if(baidu.ie&&document.compatMode=="BackCompat"){_.style.width=E[2]+"px";}else{H=parseFloat(baidu.getStyle(_,"borderLeftWidth"))||0;var I=parseFloat(baidu.getStyle(_,"borderRightWidth"))||0,F=parseFloat(baidu.getStyle(_,"marginRight"))||0;_.style.width=E[2]-H-I-D-F+"px";}K.style.height=_.offsetHeight+"px";if(J!=L.clientHeight||G!=L.clientWidth){B._adjustPos();}}};B._draw=function(C,_){var G=[],H=document.createElement("TABLE");H.cellPadding=2;H.cellSpacing=0;var F=document.createElement("TBODY");H.appendChild(F);for(var D=0,E=_.length;D<E;D++){var A=F.insertRow(-1);G.push(A);A.insertCell(-1).innerHTML=_[D];}_=document.createElement("DIV");_.className=B.options.class_prefix+"pre";_.innerHTML=B.options.prepend_html;F=document.createElement("DIV");F.className=B.options.class_prefix+"app";F.innerHTML=B.options.append_html;C.innerHTML="";C.appendChild(_);C.appendChild(H);C.appendChild(F);B._adjustPos();return G;};var D=baidu.suggestion._Central.extend(B);new baidu.ui.suggestion._Data(D,B.options.getData);var _=new baidu.ui.suggestion._InputWatcher(D,A,C),C=new baidu.ui.suggestion._Div(D,A,_,B._draw,B.options);D.listen("start",function(){setInterval(function(){var _=C.element;_.offsetWidth!=0&&A.offsetWidth!=_.offsetWidth&&B._adjustPos();},100);baidu.on(window,"resize",function(){B._adjustPos(true);});});return{pick:C.pick,hide:C.hide,highlight:C.highlight,getElement:function(){return C.element;},getData:B.options.getData,giveData:function(A,_){D.call("response_data",A,_);},dispose:function(){C.dispose();_.dispose();}};};baidu.ui.suggestion.create=function(_,A){return new baidu.ui.suggestion._Suggestion(_,A);};var options={onconfirm:function(F,A,C,D){var _=document.f1;_.pic.value=1;if(!G("sug_clk")){if(A>=0){var E=document.createElement("INPUT");E.type="hidden";E.name="clk";E.id="sug_clk";E.value=1;_.appendChild(E);}}else{if(A>=0){G("sug_clk").value=1;}}if(!G("sug_rsp")){var B=document.createElement("INPUT");B.type="hidden";B.name="rsp";B.id="sug_rsp";B.value=A;_.appendChild(B);}else{G("sug_rsp").value=A;}_.submit();},getData:function(B){if(navigator.cookieEnabled&&!getCookie("baikesug")){var _=document.f1;if(!G("sug_oq")){var A=document.createElement("INPUT");A.type="hidden";A.name="oq";A.id="sug_oq";A.value=B;_.appendChild(A);}else{G("sug_oq").value=B;}baidu.sio.callByBrowser("http://nssug.baidu.com/su?wd="+encodeURIComponent(B)+"&prod=baike&t="+(new Date()).getTime(),function(){});}},append_html:""},baikeSug={};function suggestion(){if(!navigator.cookieEnabled){return false;}if(!getCookie("baikesug")){baikeSug=baidu.ui.suggestion.create(baidu.G("word")||baidu.G("kw"),options);baikeSug.close=function(){baikeSug.hide();(baidu.G("word")||baidu.G("kw")).setAttribute("autocomplete","on");setCookie("baikesug","1","","/",location.host.replace(/:\d+/,""));};}}baidu.sug=function(B){if(!B){return;}var C=[];for(var D=0;D<B.s.length;D++){var _={};_.input=A(B.s[D]);_.selection=B.s[D];C.push(_);}baikeSug.giveData(B.q,C);function A(A){var B=document.createElement("textarea");try{B.innerHTML=A;}catch(_){B.value=A;}return B.value;}};suggestion();