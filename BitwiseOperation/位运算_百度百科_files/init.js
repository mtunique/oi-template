baidu.more.ns("bk.view");baidu.more.ns("bk.view.timer");bk.view.catalog=function(){var _={};_.init=function(_){this.subid=_;this.holder1=baidu.g("catalog-holder-"+_);this.holder2=baidu.g("catalog-holder-2-"+_);this.container=baidu.g("catalog-"+_);this.temp=null;this.data=null;this.mT=null;this.fadeT=null;this.mItems=this.holder1.getElementsByTagName("DD");this.mItemNum=this.holder1.getElementsByTagName("DD").length;this.mSubItems=null;this.mSubItemNum=0;this.mSub=this.holder1.getElementsByTagName("OL");this.mSubNum=this.mSub.length;this.mShowNum=8;this.h=0;this.dataH=0;this.fade=0;};_.start=function(G){if(!baidu.g("catalog-"+G)){return;}_.init(G);if(_.mItemNum<=_.mShowNum&&_.mSubNum==0){return;}var A="",B="";for(var F=0;F<_.mSubNum;F++){_.mSub[F].style.display="inline";}var C=_.holder1.offsetWidth;for(F=0;F<_.mSubNum;F++){_.mSub[F].style.display="none";}if(_.mItemNum>_.mShowNum){for(F=0;F<_.mShowNum;F++){A+="<dd>"+_.mItems[F].innerHTML+"</dd>";}B="<dd id='cata-temp"+G+"' class='temp'><ul id='cata-data"+G+"' class='data'>";for(F=_.mShowNum;F<_.mItemNum;F++){B+="<li>"+_.mItems[F].innerHTML+"</li>";}B+="</ul></dd>";_.holder2.innerHTML=A+B;for(F=_.mShowNum;F<_.mItemNum;F++){_.mItems[F].style.display="none";}_.temp=baidu.g("cata-temp"+G);_.data=baidu.g("cata-data"+G);_.holder2.style.display="block";_.temp.style.height=0+"px";_.dataH=_.data.offsetHeight;var E=Math.round((_.dataH-_.mShowNum*22)/2);E=E-E%22;_.step=Math.max(22,E);}else{_.holder2.innerHTML=_.holder1.innerHTML;}_.holder1.style.width=C+"px";_.holder2.style.width=C+"px";_.holder1.style.visibility="hidden";_.holder1.style.paddingBottom="20px";_.holder2.style.display="block";_.holder2.className="holder2 arr";var D=document.createElement("div");D.id="catalog-holder"+_.subid;D.className="nslog:1017 catalog-holder";D.innerHTML="\u5c55\u5f00";_.holder2.appendChild(D);_.mSubItems=_.holder2.getElementsByTagName("OL");_.mSubItemNum=_.mSubItems.length;baidu.on(D,"mouseover",function(){baidu.addClass(this,"hover");});baidu.on(D,"mouseout",function(){baidu.removeClass(this,"hover");});baidu.on(D,"click",_.toggle);baidu.on(_.holder2,"mousedown",_.holderClick);D=null;};_.status=false;_.toggle=function(){clearTimeout(_.mT);try{baidu.un(document,"click",_.outclick);}catch(A){}if(_.status){_.min();}else{_.mT=setTimeout(_.maxM,10);_.status=true;baidu.on(document,"click",_.outclick);}};_.outclick=function(A){var B=baidu.event.get(A),C=B.target;if(!baidu.dom.contains(_.container,C)){clearTimeout(_.mT);_.min();try{baidu.un(document,"click",_.outclick);}catch(A){}}B=C=null;};_.holderClick=function(A){var C=baidu.event.get(A),D=C.target;if(_.status){if(D.nodeType==1){if(D.nodeName.toUpperCase()=="A"){_.min();var B=D.href.match(/#(.*)/);if(B){location.hash=B[0];}}}}else{if(D.nodeType==1&&D.id==("catalog-holder"+_.subid)){}else{if(!(D.nodeType==1&&D.nodeName.toUpperCase()=="A")){_.toggle();}}}C=D=null;};_.min=function(){clearTimeout(_.mT);if(_.mSubNum>0){_.mT=setTimeout(_.hideSecondTitle,10);}else{_.mT=setTimeout(_.minM,100);}_.status=false;};_.maxM=function(){baidu.g("catalog-holder"+_.subid).className="nslog:1018 catalog-holder";baidu.g("catalog-holder"+_.subid).innerHTML="\u6536\u8d77";_.holder2.className="holder2 up";if(_.h<_.dataH){_.h+=_.step;_.h=Math.min(_.h,_.dataH);_.temp.style.height=_.h+"px";_.data.style.marginTop=(_.h-_.dataH)+"px";_.mT=setTimeout(_.maxM,10);}else{_.showSecondTitle();}_.status=true;};_.minM=function(){baidu.g("catalog-holder"+_.subid).innerHTML="\u5c55\u5f00";_.holder2.className="holder2 arr";if(_.h>0){_.h-=_.step;_.h=Math.max(_.h,0);_.temp.style.height=_.h+"px";_.data.style.marginTop=(_.h-_.dataH)+"px";_.mT=setTimeout(_.minM,10);}};_.fadeIn=function(){clearTimeout(_.fadeT);if(_.fade>=100){return;}_.fade+=25;for(var A=0;A<_.mSubItemNum;A++){_.mSubItems[A].style.filter="Alpha(Opacity="+_.fade+")";_.mSubItems[A].style.opacity=_.fade/100;}_.fadeT=setTimeout(_.fadeIn,20);};_.fadeOut=function(){clearTimeout(_.fadeT);if(_.fade<=25){for(var A=0;A<_.mSubItemNum;A++){_.mSubItems[A].style.display="none";}if(_.mItemNum>_.mShowNum){_.h=_.data.offsetHeight;_.temp.style.height=_.h+"px";}_.mT=setTimeout(_.minM,20);return;}_.fade-=25;_.fadeT=setTimeout(_.fadeOut,20);};_.showSecondTitle=function(){for(var A=0;A<_.mSubItemNum;A++){_.mSubItems[A].style.display="block";}if(_.mItemNum>_.mShowNum){_.h=_.data.offsetHeight;_.temp.style.height=_.h+"px";}else{}clearTimeout(_.mT);};_.hideSecondTitle=function(){clearTimeout(_.mT);for(var A=0;A<_.mSubItemNum;A++){_.mSubItems[A].style.display="none";}if(_.mItemNum>_.mShowNum){_.h=_.data.offsetHeight;_.temp.style.height=_.h+"px";}_.mT=setTimeout(_.minM,20);};_.showCatalog=function(){var A=_.holder1.style.display=="none";_.holder1.style.display=A?"block":"none";if(_.mItemNum<=_.mShowNum&&_.mSubNum==0){_.holder2.style.display="none";}else{_.holder2.style.display=A?"block":"none";}baidu.g("dir-alt-"+_.subid).innerHTML=A?"\u9690\u85cf":"\u663e\u793a";};return{start:_.start,showCatalog:_.showCatalog};};